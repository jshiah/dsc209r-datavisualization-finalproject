<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Trends Visualization</title>
    <link rel="stylesheet" href="styles.css"> <!-- Your CSS file for styling -->
    <!-- <a href="third.html" target="_blank">View Third Visualization:</a></p> -->
    <script src="https://d3js.org/d3.v7.min.js"></script> <!-- D3.js library -->
</head>

<style>
    /* Adjust SVG and legend spacing */
    #chart {
        display: block;
        margin: 0 auto;
        max-width: 10em;
        max-height: 10em;
    }
    .legend-container {
        text-align: center;
        margin-top: 0.5em;
    }
    .legend {
        font-size: 0.9em;
        margin: 0.2em 0;
    }
</style>

<body>
    <h1>Final Project: Worldwide Google Searches, 2001 to 2020!</h1>
    <h6>Welcome to Joyce, Sneha and Laura's exploration of worldwide google search trends over 
        the first 2 decades of the 21st century! We are excited to show you how some trends 
        are limited to certain geographical areas, but most trends are worldwide in our ever
        connected society. We hope you enjoy!
    </h6>
    <h1>Google Trends: Top 5 Searches Over the Years</h1>

    <div id="tooltip" style="
    position: relative;
    padding: 12px;
    background: #ffeb3b; /* Bright yellow for visibility */
    border: 2px solid #ff9800; /* Strong orange border */
    border-radius: 8px;
    font-size: 14px; /* Slightly larger text */
    font-weight: bold; /* Bold text for emphasis */
    color: #000; /* Black text for contrast */
    max-width: 350px; /* Adjusted for readability */
    margin: 20px auto;
    text-align: center;
    box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.2); /* Stronger shadow */
    transition: transform 0.3s, opacity 0.3s; /* Smooth appearance */
    transform: scale(1.1); /* Slight scaling for attention */
">
    Note: In the chart, bars are ranked from 5 to 1, where rank 5 (leftmost bar) represents the most searched item globally, and rank 1 (rightmost bar) represents the 5th most searched item globally for category in each year.
</div>

    <!-- Separate chart containers for Chart 1 and Chart 2 -->
    <div id="chart1">
        <!-- Chart 1 will be rendered here -->
        <!-- Buttons for controlling Chart 1 placed directly under it -->
        <div id="chart1-controls">
            <button id="play-button1">Play Chart 1</button>
            <button id="pause-button1">Pause Chart 1</button>
            <button id="restart-button1">Restart Chart 1</button>
        </div>
    </div>
    <p><strong>Chart 1:</strong> Above, you will see the top 5 searches in a variety of subjects over time.
        The most common search is on the left and the 5th most common search is on the right. 
    </p>
    <br>
    <br>

    <div id="chart2">
        <!-- Chart 2 will be rendered here -->
        <div id="chart2-controls">
            <button id="play-button2">Play Chart 2</button>
            <button id="pause-button2">Pause Chart 2</button>
        </div>
    </div>

    <p>
        <strong>Chart 2:</strong> Above, you will see how the top 10 searches in a single category can change
        over time. This is a good way to see how long it takes trend to emerge and how long 
        they will stick around for! 
    </p>

    <p style="text-align: left;">
        Bar chart races are well suited to represent each year's top 10 most globally searched categories from the Google search engine. 
        This specific dataset includes thousands of non-English data, but due to the time constraints and limited capabilities of current GPT models 
        and NLP libraries to translate all non-English category names into English for further model fine-tuning, 
        data harmonization could not be completed on-time. Thus only English category names were accounted for in these visuals. 
        and explains why specific years may look quite sparse in terms of data on Google searches. 

    </p>

    <p style="text-align: left;">
        <strong>Annotations: </strong> Instead of statically laying out all 21 bar charts across the page, building an interactive and animated chart 
        with all 21 years’ worth of data aggregated will engage the user’s attention much more. 
        Additionally, incorporating Pause and Play buttons to control the pace of the displays 
        will allow the user to pause and focus on particular data points or time periods as needed. Unlike its static counterpart, 
        this practice of animated visualizations incorporate storytelling by showing how each year's trends fare and avoids repetition
        of 21 similar visualizations that may overwhelm the user. By differentiating categories by contrasting colors and including tooltips 
        that provide information on number of searches and specific Category names, 
        the audience will be able to see the story unfold over how long trends last throughout the years. 

    </p>

    <p style="text-align: left;">
        <strong>Takeaway: </strong> From this visualization, one key takeaway is that contrary to expectations of the "News" Category dominating 
        Google searches, the "People" category -- including celebrities and moguls -- frequently held the 
        #1 position as the most searched category from the early 2010s to 2020. 
        With this interactive visual, users will stay engaged due to its interactive elements and identify that the "People" category 
        sustained its relevancy the longest, showing its consistency in keeping up as a trending topic 
        for a number of years. In the meantime, other categories fluctuate in relevancy throughout the years. 
        This makes the storytelling of the dataset much more memorable for the audience.
    </p>

    <p style="text-align: left;">
        <strong>Challenge(s):</strong> The challenge in building this bar chart race was identifying the most efficient and accurate way to pre-process 
        the dataset. D3.js may be brilliant with data visualization, but performing data aggregation and 
        preprocessing proves to be subpar compared to Python and its libraries. 
        The best way to go about finding the top 10 categories and its counts per year was by 
        first preprocessing and creating a filtered CSV file from Python Pandas, 
        then having D3.js work off from the filtered CSV in order to build the bar chart race accurately. 
    </p>

    <br>
    <br>

    <h1>Pie Chart of Top 6 Searches in Certain Categories</h1>
    <p>For our third visualization, you can explore the top 6 searches within a chosen category 
       over the entire dataset's time period. A query is counted for each time it was in a country's 
       top 5 most common searches over a full year in the given category.</p>
    <label for="category-select">Select Category: </label>
    <select id="category-select">
        <option value="People">People</option>
        <option value="Global Figures">Global Figures</option>
        <option value="Athletes">Athletes</option>
        <option value="Women">Women</option>
        <option value="Men">Men</option>
    </select>
    <h1 id="chart-title">Most Popular Searches From 2001 to 2020</h1>
    <svg id="chart" viewBox="-50 -50 100 100"></svg>
    <p>Number of times this individual was in the top 5 searches of a country over a full year</p>
    <div class="legend-container"></div>

    <!-- Link to the merged JavaScript file -->
    <script src="combined.js"></script>
    
    <!-- Load JSON data dynamically (if it's in a JSON file) -->
    <script type="text/javascript">
        d3.json("filtered_data.json").then(function(json_data) {
            // Now `json_data` is available, and you can pass it to your chart rendering functions
            console.log(json_data); // Check data format
            // You can now call the chart2 creation logic here with `json_data` passed to it
            // Example: yourChartFunction(json_data);
        }).catch(function(error) {
            console.log("Error loading JSON data: ", error);
        });
    </script>
</body>
</html>
